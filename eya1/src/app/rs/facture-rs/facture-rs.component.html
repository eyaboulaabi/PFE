<app-header></app-header>

      <div class="container">
          <div class="table-wrapper">
            <div class="table-title">
              <div class="row">
                  <h2>Factures<b> Transférer</b></h2>
              </div>
            </div>
            <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead>
              <tr>
                <th> #</th>
                <th>RaisonSociale</th>
                <th> NumBonCommande</th>
                <th> NumFacture</th>
                <th>DateFacture</th>
                <th>TTC</th>
                <th>Structure</th>
                <th>Etat</th>
                <th>Annexe</th>
                <th>Action</th>

              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let fac of factures  |paginate : { itemsPerPage:5,
                currentPage: page,
                totalItems: totalLength  }
                ">
                <th scope="row">{{ fac.id }}</th>
                <td><span>{{fac.raisonSocial}}</span></td>
                <td><span>{{fac.numBonde}}</span></td>
                <td><span>{{fac.numFact}}</span></td>
                <td><span>{{fac.dateFact | date: 'shortDate'}}</span></td>
                <td><span>{{fac.ttc}}</span></td>
                <td><span>{{fac.structure}}</span></td>
                <td><span>{{fac.etat}}</span></td>
                <td>
                  <button [routerLink]="['/rs/facture',fac.id]"> <span>Consulter</span></button>
                </td>
                <td>
                  <!--edit-->
                  <a class="edit" data-toggle="modal" (click)="openEdit(contentEdit, fac)"><i class="material-icons"data-toggle="tooltip"title="Edit">
                    &#xE254; </i></a>
                  <!--delete--->
                  <a class="delete" data-toggle="modal" (click)="openDelete(contentDelete, fac)"><span class="material-icons-outlined">
                    cancel
                    </span></a>
                    <a class="" (click)="saveNotification(fac.id, fac.structure)" ><i class="fa fa-paper-plane" aria-hidden="true"></i> </a>

                </td>
              </tr>
              </tbody>
            </table>
            <pagination-controls class="text-center" (pageChange)="page = $event"></pagination-controls>
          </div>
          <!---Annuler facture-->
          <ng-template #contentDelete let-modal>
            <div class="modal-header">
              <h4 class="modal-title">Confirmation de la suppression</h4>
              <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <h2>Êtes-vous sûr de vouloir Annuler cette facture cette facture.</h2>

              <div class="border text-center">
                <button data-dismiss="modal" class="btn btn-danger" (click)="deleteFacture()">Oui, Annuler!</button>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Fermer</button>
            </div>
          </ng-template>


          <!----modifier facture -->
          <ng-template #contentEdit let-modal>
            <div class="modal-header">
              <h4 class="modal-title" id="modal-basic-title2">Modifier Facture</h4>
              <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form [formGroup]="editForm" novalidate>
                <div class="modal-body">
                  <div class="form-group">
                    <label>RaisonSociale</label>
                    <div class="input-group">
                      <input formControlName="raisonSocial" class="form-control">
                    </div>
                  </div>
                  <div class="form-group">
                    <label>NumBande</label>
                    <div class="input-group">
                      <input formControlName="numBonde" class="form-control">
                    </div>
                  </div>
                  <div class="form-group">
                    <label>NumFact</label>
                    <div class="input-group">
                      <input formControlName="numFact" class="form-control">
                    </div>
                  </div>
                  <div class="form-group">
                    <label>DateFact</label>

                      <input class="form-control"
                    placeholder="dd-mm-yyyy"
                    formControlName="dateFact"
                   ngbDatepicker #d="ngbDatepicker">


                  </div>
                  <div class="form-group">
                    <label>TTC</label>
                    <div class="input-group">
                      <input formControlName="ttc" class="form-control">
                    </div>
                  </div>
                  <div class="form-group">
                    <label>Structure</label>
                    <div class="input-group">
                      <input formControlName="structure" class="form-control">
                    </div>
                  </div>
                  <div class="form-group">
                    <label>Etat</label>
                    <div class="input-group">
                      <input formControlName="etat" class="form-control">
                    </div>
                  </div>
                </div>
              </form>
            </div>

            <div class="modal-footer">
              <button type="submit" class="btn btn-success" data-dismiss="modal" (click)=" Edit()">Modifier</button>
              <button type="button" class="btn btn-dark" (click)="modal.close('Save click')">Fermer</button>
            </div>
          </ng-template>
        </div>
      </div>
